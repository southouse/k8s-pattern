# 초기화 컨테이너
> 초기화 관련 작업에 개별 수명주기를 제공해 메인 애플리케이션 컨테이너와 분리할 수 있음

## 문제
- 초기화를 위해 자바에서는 필요한 객체를 인스턴스화하는 생성자를 사용
- 파드 안에 주요 애플리케이션을 형성하는 하나 이상의 컨테이너가 있을 때 컨테이너가 시작하기 전에 필요조건이 있을 수 있음
  - 파일 시스템, 데이터베이스 스키마 설정, 애플리케이션 시드 데이터 설치 등을 위한 특수 권한 설정이 포함
  - 애플리케이션 이미지에 포함될 수 없는 도구와 라이브러리가 필요
  - 애플리케이션 이미지에 초기화 작업을 수행할 권한이 없을 수 있음
  - 외부 의존성이 충족될 때까지 애플리케이션 시작을 지연시켜야 할 수 있음

## 해결책
- 모든 초기화 컨테이너는 순차적으로 하나씩 실행
- 애플리케이션 컨테이너가 시작되기 전에 모든 초기화 컨테이너가 성공적으로 종료되어야 함
- 병렬로 실행되는 애플리케이션 컨테이너와 달리 순차적으로 실행
- 일반적으로 초기화 컨테이너는 애플리케이션 컨테이너와의 의존성을 위해 파드 시작을 지연시키는 경우를 제외하고는 작아야 하고 빠르게 실행되고 성공적으로 완료되어야 함
- 초기화 컨테이너가 실패하면, 전체 파드는 다시 시작되고 모든 초기화 컨테이너도 다시 실행
- 파드 시작 프로세스가 애플리케이션 컨테이너로 넘어가기 전에 모든 초기화 컨테이너가 성공적으로 종료되어야 하므로, 초기화 컨테이너는 레디니스 체크가 없음
- 실질적인 파드 레벨 요청 및 제한 값은 다음 두 그룹 중 가장 높은 값이 됨
  - 가장 높은 초기화 컨테이너 요청/제한 값
  - 모든 애플리케이션 컨테이너의 요청/제한 값의 합
- 자원 요구량이 높은 초기화 컨테이너와 자원 요구량이 낮은 애플리케이션 컨테이너가 있는 경우
  - 스케줄링에 영향을 주는 파드 레벨 요청 및 제한 값은 초기화 컨테이너의 높은 값을 기반으로 함
  - 이런 경우 자원을 효율적으로 사용하지 않음
  - 초기화 컨테이너가 짧은 시간 동안 실행되고 나머지 시간 동안 노드에 가용할 용량이 남아 있더라도, 다른 파드에서 이 자원을 사용할 수 없음
- 그 밖의 초기화 기법
  - 어드미션 컨트롤러(Admission Controller)
  - 어드미션 웹훅(Admission Webhook)
  - 이니셜라이저(Initializer)
  - 파드프리세트(PodPreset)

## 정리
- 초기화 컨테이너는 오직 현재 초기화 컨테이너가 성공적으로 완료되었을 때만 다음 단계로 진행

> 초기화와 애플리케이션 관련 작업을 분리해서 컨테이너를 만들고 파드를 구성할 수 있음