# 데몬 서비스
> 관리자가 쿠버네티스 플랫폼 기능을 향상시키기 위해서 노드에 특화된 파드를 실행하는 데 사용

## 문제
- 데몬 프로그램은 공통적으로 프로세스로서 실행되고, 일반적으로 모니터, 키보드, 마우스 등과 상호작용하지 않고 시스템 부팅 때 실행
- 쿠버네티스의 데몬셋(Daemonset)은 클러스터 노드에서 실행되고 나머지 클러스터에 대한 일부 백그라운드 기능을 제공하는 파드를 생성

## 해결책
- 데몬셋도 레플리카셋과 마찬가지로 특정 개수의 파드가 항상 실행되도록 책임
- 데몬셋의 주요 목적은 모든 노드 혹은 특정 노드 위에 단일 파드를 계속 실행시키는 것
- 주요 사용 용도는 로그 수집기, 메트릭 익스포터(exporter), 큐브프록시(kube-proxy) 등 클러스터 전반적으로 작업을 수행하는 인프라와 관련된 프로세스
- 레플리카셋과의 주요 차이점
  - 기본적으로 데몬셋은 모든 노드에 하나의 파드가 배치
  - 데몬셋으로 생성된 파드는 이미 특정 nodeName을 가지고 있어 쿠버네티스 스케줄러를 필요로 하지 않음
  - 데몬셋으로 생성된 파드는 스케줄러가 시작되기 전에 실행될 수 있어 다른 파드들이 노드에 배치되기 전에 실행이 가능
  - 스케줄러가 사용되지 않기 때문에, 노드의 `unschedulable` 필드는 데몬셋과 관련이 없음
  - 대부분의 컨트롤러는 데몬셋 파드들을 더 높은 우선순위로 별개 취급
    - 디스케줄러는 이 데몬 파드들을 축출하지 않으며, 클러스터 오토스케일러는 데몬 파드를 분리해 관리
- 데몬셋이 관리하는 파드에 접근하는 방법
  - 서비스
  - DNS
  - hostPort를 사용한 NodeIP
  - 푸시: 데몬셋 파드에 접근 없이 데몬셋 파드에서 다른 서비스로 데이터를 푸시

> 정적파드(static pod)보다 데몬셋이 플랫폼의 나머지 부분과 더 잘 통합되기 때문에 데몬셋 사용을 권장

## 정리
> 데몬셋과 크론잡은 크론탭과 데몬 스크립트 같은 단일 노드 개념을, 분산 시스템 관리를 위한 멀티 노드 클러스터 개념으로 바꾸는 방법에 대한 완벽한 사례